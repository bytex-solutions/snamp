<div class="right_col" role="main" style="min-height: 949px;">
  <div class="">
    <div class="page-title">
      <div class="title_left">
        <h3>{{getMainHeader()}}</h3>
      </div>
    </div>

    <div class="clearfix"></div>


    <!-- Modal for edit the trigger for activeWatcher -->
    <div class="modal fade" id="editTriggerModal" role="dialog" aria-labelledby="editTriggerLabel"  *ngIf="activeWatcher != undefined">
      <div class="modal-dialog modal-xlg modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title leftAlign" id="editTriggerLabel">Edit trigger</h4>
            <br/>
            <div class="modal-body">
              <div id="smartwizardForTrigger" style="height: 95%">
                <ul>
                  <li>
                    <a [attr.href]="'#language'">
                      Language<br />
                      <small>Select language for trigger</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#url'">
                      Use url<br />
                      <small>Use URL for loading script</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#ptable'">
                      Parameters<br />
                      <small>Append parameters</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#script'">
                      Script<br />
                      <small>Trigger's script</small>
                    </a>
                  </li>
                </ul>

                <div style="height:100%">
                  <div id="language" class="row" style="margin-top: 100px;">
                    <div class="item form-group">
                      <label
                              class="control-label col-md-3 col-sm-3 col-xs-12"
                              for="languageSelect"
                              style="margin-top: 7px;">
                        Language <span class="required">*</span>
                      </label>
                      <div class="col-md-6 col-sm-6 col-xs-12">
                        <select class="form-control" [(ngModel)]="activeWatcher.trigger.language" id="languageSelect">
                          <option *ngFor="let language of triggerLanguages" [ngValue]="language">{{language}}</option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <div id="url" class="row" style="margin-top: 100px;">
                    <div class="item form-group">
                      <label
                              class="control-label col-md-3 col-sm-3 col-xs-12"
                              style="margin-top: 7px;">
                        Load script from external URL <span class="required">*</span>
                      </label>

                      <div class="col-md-6 col-sm-6 col-xs-12" >
                        <ui-switch
                                [(ngModel)]="activeWatcher.trigger.isURL"
                                [size]="'small'">
                        </ui-switch>
                      </div>
                    </div>
                  </div>

                  <div id="ptable" class="row" style="margin-top: 30px;">
                    <div>
                      <ptable [entity]="activeWatcher.trigger"></ptable>
                    </div>
                  </div>

                  <div id="script" class="row" style="margin-top: 20px;">
                    <div *ngIf="activeWatcher.trigger.isURL">
                      <div class="item form-group">
                        <label
                                class="control-label col-md-3 col-sm-3 col-xs-12"
                                for="urlForTrigger"
                                style="margin-top: 7px;">
                          Url for script loading <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                          <input type="text" class="form-control" id="urlForTrigger" placeholder="Input url for script to be loaded from" [(ngModel)]="activeWatcher.trigger.script"/>
                        </div>
                      </div>
                    </div>
                    <div *ngIf="!activeWatcher.trigger.isURL">
                      <div>
                        <div class="row">
                          <label
                                  class="control-label col-md-3 col-sm-3 col-xs-12"
                                  for="scriptBodyForTrigger"
                                  style="margin-top: 7px;">
                            Script body for the trigger <span class="required">*</span>
                          </label>
                        </div>
                        <div class="row">
                          <div class="col-md-12 col-sm-12 col-xs-12">
                            <textarea id="scriptBodyForTrigger" rows="10" class="form-control" [(ngModel)]="activeWatcher.trigger.script"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-2" style="float:right; margin-top: 30px;">
                      <button class="btn btn-primary" data-dismiss="modal" (click)="saveCurrentTrigger()">Save trigger</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for edit checkers for activeWatcher -->
    <div class="modal fade" id="editCheckerModal" role="dialog" aria-labelledby="editCheckerLabel" *ngIf="activeWatcher != undefined">
      <div class="modal-dialog modal-xlg modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title leftAlign" id="editCheckerLabel">Edit attribute checkers</h4>
            <br/>
            <div class="modal-body">
              <div id="smartwizardForCheckers" style="height: 95%">
                <ul>
                  <li>
                    <a [attr.href]="'#checkerTable'">
                      Select checker<br />
                      <small>Select type of checker</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#checkerType'">
                      Type<br />
                      <small>Select type of checker</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#checkerPTable'">
                      Parameters<br />
                      <small>Set parameters</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#checkerBody'">
                      Checker's logic<br />
                      <small>What action will be performed</small>
                    </a>
                  </li>
                </ul>

                <div style="height:100%">

                  <div id="checkerTable" class="row" style="margin-top: 5px;">
                    <table class="table table-bordered">
                      <thead class="thead-inverse">
                      <tr>
                        <th>Actions</th>
                        <th>Attribute</th>
                        <th>Binding</th>
                        <th>Checker type</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let attribute of attributes" class="clickableTr" [class.activeTr]="((selectedAttribute != undefined) && (selectedAttribute.name == attribute.name))" (click)="editCheckerForAttribute(attribute)">
                        <td>
                                  <span
                                          class="glyphicon glyphicon-remove-circle btn btn-xs btn-danger"
                                          (click)="removeCheckerForAttribute(attribute)"
                                          aria-hidden="true">
                                  </span>
                        </td>
                        <th scope="row">{{attribute.name}}</th>
                        <td>
                                <span class="input-group-addon"  *ngIf="activeWatcher.checkerExists(attribute.name)">
                                      <span class="glyphicon glyphicon-ok glyph-icon-appended" aria-hidden="true"></span>
                                 </span>
                        </td>
                        <td>
                          {{activeWatcher.checkerTypeForAttributeName(attribute.name)}}
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>

                  <div id="checkerPTable" class="row" style="margin-top: 30px;">
                    <div>
                      <ptable [entity]="activeChecker"></ptable>
                    </div>
                  </div>

                  <div id="checkerType" class="row" style="margin-top: 100px;">
                    <div class="item form-group">
                      <label
                              class="control-label col-md-3 col-sm-3 col-xs-12"
                              for="checkerTypeSelect"
                              style="margin-top: 7px;">
                        Set type for attribute checker <span class="required">*</span>
                      </label>
                      <div class="col-md-6 col-sm-6 col-xs-12">
                        <select class="form-control" [(ngModel)]="activeChecker.language" id="checkerTypeSelect" (ngModelChange)="selectCheckerType($event)">
                          <option *ngFor="let type of checkersType" [ngValue]="type.id">{{type.description}}</option>
                        </select>
                      </div>
                    </div>
                  </div>


                  <div id="checkerBody" class="row" style="margin-top: 5px;">
                    <div *ngIf="activeChecker?.language != 'ColoredAttributeChecker'" style="margin-top: 20px;">

                      <div class="item form-group" style="margin-bottom: 15px;">
                        <label
                                class="control-label col-md-3 col-sm-3 col-xs-12"
                                style="margin-top: 7px;">
                          Load script from external URL <span class="required">*</span>
                        </label>

                        <div class="col-md-6 col-sm-6 col-xs-12" >
                          <ui-switch
                                  [(ngModel)]="activeChecker.isURL"
                                  [size]="'small'">
                          </ui-switch>
                        </div>
                      </div>

                      <div *ngIf="activeChecker?.isURL">
                        <div class="item form-group">
                          <label
                                  class="control-label col-md-3 col-sm-3 col-xs-12"
                                  for="urlForChecker"
                                  style="margin-top: 7px;">
                            Url for script loading <span class="required">*</span>
                          </label>
                          <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" class="form-control" id="urlForChecker" placeholder="Input url for script to be loaded from" [(ngModel)]="activeChecker.script"/>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="!activeChecker?.isURL">
                        <div class="item form-group">
                          <label
                                  class="control-label col-md-3 col-sm-3 col-xs-12"
                                  for="scriptBodyForChecker"
                                  style="margin-top: 7px;">
                            Script body for the checker <span class="required">*</span>
                          </label>
                          <div class="col-md-6 col-sm-6 col-xs-12">
                            <textarea id="scriptBodyForChecker" rows="5" class="form-control" [(ngModel)]="activeChecker.script"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="activeChecker?.language == 'ColoredAttributeChecker'">
                      <div class="panel-group group-accordeon" id="accordionChecker" role="tablist" aria-multiselectable="true">
                        <div class="panel panel-default" >
                          <div class="panel-heading" role="tab" id="headingOne">
                            <h4 class="panel-title">
                              <a role="button" data-toggle="collapse" data-parent="#accordionChecker" href="#collapseGreen" aria-expanded="true" aria-controls="collapseGreen">
                                <img src="assets/img/green-circle.png" class="img-inline"> Green condition
                              </a>
                            </h4>
                          </div>
                          <div id="collapseGreen" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                            <div class="panel-body">
                              <coloredCondition [entity]="activeChecker.object.green" (notify)="onGreenNotify($event)"></coloredCondition>
                            </div>
                          </div>
                        </div>
                        <div class="panel panel-default">
                          <div class="panel-heading" role="tab" id="headingTwo">
                            <h4 class="panel-title">
                              <a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordionChecker" href="#collapseYellow" aria-expanded="false" aria-controls="collapseYellow">
                                <img src="assets/img/yellow-circle.png" class="img-inline"> Yellow condition
                              </a>
                            </h4>
                          </div>
                          <div id="collapseYellow" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
                            <div class="panel-body">
                              <coloredCondition [entity]="activeChecker.object.yellow" (notify)="onYellowNotify($event)"></coloredCondition>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div class="col-md-2" style="float:right;">
                      <button class="btn btn-primary" data-dismiss="modal" (click)="saveCurrentChecker()">Save checker</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal for edit policies for activeWatcher -->
    <div class="modal fade" id="editPolicyModal" role="dialog" aria-labelledby="editPolicyLabel" *ngIf="activeWatcher != undefined">
      <div class="modal-dialog modal-xlg modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title leftAlign" id="editPolicyLabel">Edit scaling policies</h4>
            <br/>
            <div class="modal-body">
              <div id="smartwizardForPolicies" style="height: 95%">
                <ul>
                  <li>
                    <a [attr.href]="'#votingStrategy'">
                      Voting strategy<br />
                      <small>Select voting strategy</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#policyTable'">
                      Policy selection<br />
                      <small>Select or add a policy</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#policyType'">
                      Type<br />
                      <small>Select type of policy</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#policyPTable'">
                      Parameters<br />
                      <small>Set parameters</small>
                    </a>
                  </li>
                  <li>
                    <a [attr.href]="'#policyBody'">
                      Policy's logic<br />
                      <small>How the policy works</small>
                    </a>
                  </li>
                </ul>

                <div style="height:100%">

                  <div id="votingStrategy" class="row" style="margin-top: 100px;">
                    <div class="item form-group">
                      <label
                              class="control-label col-md-3 col-sm-3 col-xs-12"
                              for="strategySelect"
                              style="margin-top: 7px;">
                        Set strategy <span class="required">*</span>
                      </label>
                      <div class="col-md-6 col-sm-6 col-xs-12">
                        <select class="form-control" [(ngModel)]="activeWatcher.votingStrategy" id="strategySelect" (ngModelChange)="selectVotingStrategy($event)">
                          <option *ngFor="let type of strategyTypes" [ngValue]="type.id">{{type.description}}</option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <div id="policyTable" class="row" style="margin-top: 5px;">
                    <table class="table table-bordered">
                      <thead class="thead-inverse">
                      <tr>
                        <th>Actions</th>
                        <th>Name</th>
                        <th>Type</th>
                        <th *ngIf="activeWatcher.votingStrategy == 'custom'">Weight</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr *ngFor="let entry of activeWatcher.scalingPolicies | keys" class="clickableTr" [class.activeTr]="isPolicyActive(entry.key)" (click)="editPolicy(entry.key, entry.value)">
                        <td>
                                  <span
                                          class="glyphicon glyphicon-remove-circle btn btn-xs btn-danger"
                                          (click)="removePolicy(entry.key)"
                                          aria-hidden="true">
                                  </span>
                        </td>
                        <th scope="row">{{entry.key}}</th>
                        <td>
                          {{entry.value.getPolicyType()}}
                        </td>
                        <td *ngIf="activeWatcher.votingStrategy == 'custom'">
                          {{entry.value.getPolicyWeight()}}
                        </td>
                      </tr>
                      </tbody>
                    </table>
                    <button class="btn btn-primary btn-xs" (click)="addNewPolicy()" *ngIf="!newPolicyAppended">
                      Add new policy
                    </button>
                  </div>

                  <div id="policyType" class="row" style="margin-top: 100px;">
                    <div class="item form-group">
                      <label
                              class="control-label col-md-3 col-sm-3 col-xs-12"
                              for="policyTypeSelect"
                              style="margin-top: 7px;">
                        Set type for policy <span class="required">*</span>
                      </label>
                      <div class="col-md-6 col-sm-6 col-xs-12">
                        <select class="form-control" [(ngModel)]="activePolicy.language" id="policyTypeSelect" (ngModelChange)="selectPolicyType($event)">
                          <option *ngFor="let type of policyTypes" [ngValue]="type.id">{{type.description}}</option>
                        </select>
                      </div>
                    </div>
                  </div>

                  <div id="policyPTable" class="row" style="margin-top: 30px;">
                    <div>
                      <ptable [entity]="activePolicy"></ptable>
                    </div>
                  </div>

                  <div id="policyBody" class="row" style="margin-top: 5px;">
                    <div *ngIf="activePolicy?.language == 'Groovy'" style="margin-top: 20px;">

                      <div class="item form-group" style="margin-bottom: 15px;">
                        <label
                                class="control-label col-md-3 col-sm-3 col-xs-12"
                                style="margin-top: 7px;">
                          Load script from external URL <span class="required">*</span>
                        </label>

                        <div class="col-md-6 col-sm-6 col-xs-12" >
                          <ui-switch
                                  [(ngModel)]="activePolicy.isURL"
                                  [size]="'small'">
                          </ui-switch>
                        </div>
                      </div>

                      <div *ngIf="activePolicy?.isURL">
                        <div class="item form-group">
                          <label
                                  class="control-label col-md-3 col-sm-3 col-xs-12"
                                  for="urlForPolicy"
                                  style="margin-top: 7px;">
                            Url for script loading <span class="required">*</span>
                          </label>
                          <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" class="form-control" id="urlForPolicy" placeholder="Input url for script to be loaded from" [(ngModel)]="activePolicy.script"/>
                          </div>
                        </div>
                      </div>
                      <div *ngIf="!activePolicy?.isURL">
                        <div class="item form-group">
                          <label
                                  class="control-label col-md-3 col-sm-3 col-xs-12"
                                  for="scriptBodyForPolicy"
                                  style="margin-top: 7px;">
                            Script body for the policy <span class="required">*</span>
                          </label>
                          <div class="col-md-6 col-sm-6 col-xs-12">
                            <textarea id="scriptBodyForPolicy" rows="5" class="form-control" [(ngModel)]="activePolicy.script"></textarea>
                          </div>
                        </div>
                      </div>
                    </div>

                    <div *ngIf="activePolicy?.language == 'HealthStatusBased'">

                      <div class="form-group row">
                        <label for="healthStatusTypeSelection" class="col-md-2 col-form-label">Level</label>
                        <div class="col-md-10">
                          <select class="form-control" [(ngModel)]="activePolicy.policyObject.level" id="healthStatusTypeSelection">
                            <option  *ngFor="let level of healthStatusLevels" [ngValue]="level">{{level}}</option>
                          </select>
                        </div>
                      </div>

                      <div class="form-group row" *ngIf="activeWatcher.votingStrategy == 'custom'">
                        <label for="voteWeightHSBPolicy" class="col-md-2 col-form-label">Vote weight</label>
                        <div class="col-md-10">
                          <input class="form-control" type="number"  min="0" [(ngModel)]="activePolicy.policyObject.voteWeight" id="voteWeightHSBPolicy">
                        </div>
                      </div>

                      <div class="form-group row">
                        <label for="observationTimeHSBPolicy" class="col-md-2 col-form-label">Observation time (ms)</label>
                        <div class="col-md-10">
                          <input class="form-control" type="number" min="0" [(ngModel)]="activePolicy.policyObject.observationTime" id="observationTimeHSBPolicy">
                        </div>
                      </div>

                      <div class="form-group row">
                        <label class="col-md-2 col-form-label">Incremental weight</label>
                        <div class="col-md-10">
                          <ui-switch
                                  [(ngModel)]="activePolicy.policyObject.incrementalWeight"
                                  [size]="'small'">
                          </ui-switch>
                        </div>
                      </div>

                    </div>

                    <div *ngIf="activePolicy?.language == 'MetricBased'">

                      <div class="form-group row" style="margin-top: 15px">
                        <label for="operationalRangePolicy" class="col-md-2 col-form-label">Operational range</label>
                        <div class="col-md-6">
                          <input class="form-control" disabled type="text" min="0" [attr.value]="activePolicy.policyObject.operationalRange.toString()" id="operationalRangePolicy">
                        </div>
                        <div class="col-md-2">
                          <button class="btn btn-primary" (click)="toggleOperationalRangeDialog()">{{ operationalRangeVisible ? 'Hide' : 'Edit' }}</button>
                        </div>
                        <div class="col-md-4">
                          <button class="btn" (click)="updatePolicyRecommendation()">Recommendation</button>
                        </div>
                      </div>

                      <div class="form-group row" *ngIf="currentRecommendation != undefined">
                        <label for="operationalRangePolicyRec" class="col-md-2 col-form-label">Recommendation for operational range</label>
                        <div class="col-md-8">
                          <input class="form-control" disabled type="text" min="0" [attr.value]="currentRecommendation.toString()" id="operationalRangePolicyRec">
                        </div>
                        <div class="col-md-2">
                          <button class="btn btn-primary" (click)="applyRecommendation()">Apply</button>
                        </div>
                      </div>

                      <div class="form-group row" *ngIf="operationalRangeVisible">
                        <label for="operationalRangePolicy" class="col-md-2 col-form-label">Operational settings</label>
                        <div class="col-md-10">
                          <div class="row">
                            <br/><br/>
                          </div>
                          <div class="row">
                            <label class="col-md-3">Lower bound infinite</label>
                            <div class="col-md-9">
                              <ui-switch
                                      [(ngModel)]="activePolicy.policyObject.operationalRange.isBeginInfinite"
                                      [size]="'small'">
                              </ui-switch>
                            </div>
                          </div>

                          <div class="row" *ngIf="!activePolicy.policyObject.operationalRange.isBeginInfinite">
                            <label class="col-md-3">Lower bound value</label>
                            <div class="col-md-4">
                              <input type="number" class="form-control" [(ngModel)]="activePolicy.policyObject.operationalRange.begin"/>
                            </div>
                            <label class="col-md-1">including</label>
                            <div class="col-md-4">
                              <ui-switch
                                      [(ngModel)]="activePolicy.policyObject.operationalRange.isBeginIncluding"
                                      [size]="'small'">
                              </ui-switch>
                            </div>
                          </div>

                          <div class="row">
                            <label class="col-md-3">Upper bound infinite</label>
                            <div class="col-md-9">
                              <ui-switch
                                      [(ngModel)]="activePolicy.policyObject.operationalRange.isEndInfinite"
                                      [size]="'small'">
                              </ui-switch>
                            </div>
                          </div>

                          <div class="row" *ngIf="!activePolicy.policyObject.operationalRange.isEndInfinite">
                            <label class="col-md-3">Upper bound value</label>
                            <div class="col-md-4">
                              <input type="number" class="form-control" [(ngModel)]="activePolicy.policyObject.operationalRange.end"/>
                            </div>
                            <label class="col-md-1">including</label>
                            <div class="col-md-4">
                              <ui-switch
                                      [(ngModel)]="activePolicy.policyObject.operationalRange.isEndIncluding"
                                      [size]="'small'">
                              </ui-switch>
                            </div>
                          </div>

                        </div>
                      </div>

                      <hr/>

                      <div class="form-group row">
                        <label for="metricAttributeSelection" class="col-md-2 col-form-label">Attribute</label>
                        <div class="col-md-10">
                          <select class="form-control" [(ngModel)]="activePolicy.policyObject.attributeName" id="metricAttributeSelection">
                              <option  *ngFor="let attribute of attributes" [ngValue]="attribute.name">{{attribute.name}}</option>
                          </select>
                        </div>
                      </div>

                      <div class="form-group row">
                        <label for="metricAggregationSelection" class="col-md-2 col-form-label">Aggregation</label>
                        <div class="col-md-10">
                          <select class="form-control" [(ngModel)]="activePolicy.policyObject.aggregation" id="metricAggregationSelection">
                            <option  *ngFor="let aggregation of aggregations" [ngValue]="aggregation">{{aggregation}}</option>
                          </select>
                        </div>
                      </div>

                      <div class="form-group row">
                        <label for="analysisDepthPolicy" class="col-md-2 col-form-label">Analysis depth (ms)</label>
                        <div class="col-md-10">
                          <input class="form-control" type="number" min="0" [(ngModel)]="activePolicy.policyObject.analysisDepth" id="analysisDepthPolicy">
                        </div>
                      </div>

                      <div class="form-group row" *ngIf="activeWatcher.votingStrategy == 'custom'">
                        <label for="voteWeightAttrPolicy" class="col-md-2 col-form-label">Vote weight</label>
                        <div class="col-md-10">
                          <input class="form-control" type="number"  min="0" [(ngModel)]="activePolicy.policyObject.voteWeight" id="voteWeightAttrPolicy">
                        </div>
                      </div>

                      <div class="form-group row">
                        <label for="observationTimeAttrPolicy" class="col-md-2 col-form-label">Observation time (ms)</label>
                        <div class="col-md-10">
                          <input class="form-control" type="number" min="0" [(ngModel)]="activePolicy.policyObject.observationTime" id="observationTimeAttrPolicy">
                        </div>
                      </div>

                      <div class="form-group row">
                        <label class="col-md-2 col-form-label">Incremental weight</label>
                        <div class="col-md-10">
                          <ui-switch
                                  [(ngModel)]="activePolicy.policyObject.incrementalWeight"
                                  [size]="'small'">
                          </ui-switch>
                        </div>
                      </div>

                    </div>

                    <div class="col-md-2" style="float:right;">
                      <button class="btn btn-primary" data-dismiss="modal" (click)="saveCurrentPolicy()">Save policy</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row" style="margin-top: 30px">
      <panel [header]="'Supervisor settings'" [column]="'7'" *ngIf="activeWatcher != undefined">

        <div class="form-group row">
          <label for="watcherTypeSelection" class="col-md-2 col-form-label">Type</label>
          <div class="col-md-10">
            <select class="form-control" [(ngModel)]="activeWatcher.type" id="watcherTypeSelection">
              <option  *ngFor="let supervisor of availableSupervisors" [ngValue]="supervisor.type">{{supervisor.type}}</option>
            </select>
          </div>
        </div>

        <div class="form-group row">
          <label for="connectionStringTmpl" class="col-md-2 col-form-label">Connection string template</label>
          <div class="col-md-10">
            <input class="form-control" type="text" [(ngModel)]="activeWatcher.connectionStringTemplate" id="connectionStringTmpl">
          </div>
        </div>

        <div class="form-group row" *ngIf="activeWatcher.autoScaling">
          <label for="scalingSizeInput" class="col-md-2 col-form-label">Scaling size</label>
          <div class="col-md-10">
            <input class="form-control" type="number" min="0" [attr.max]="activeWatcher.maxClusterSize" [(ngModel)]="activeWatcher.scalingSize" id="scalingSizeInput">
          </div>
        </div>

        <div class="form-group row" *ngIf="activeWatcher.autoScaling">
          <label for="minClusterSizeInput" class="col-md-2 col-form-label">Minimum cluster size</label>
          <div class="col-md-10">
            <input class="form-control" type="number" min="0" [(ngModel)]="activeWatcher.minClusterSize" id="minClusterSizeInput">
          </div>
        </div>

        <div class="form-group row" *ngIf="activeWatcher.autoScaling">
          <label for="maxClusterSizeInput" class="col-md-2 col-form-label">Maximum cluster size</label>
          <div class="col-md-10">
            <input class="form-control" type="number" [attr.min]="activeWatcher.minClusterSize" [(ngModel)]="activeWatcher.maxClusterSize" id="maxClusterSizeInput">
          </div>
        </div>

        <div class="form-group row" *ngIf="activeWatcher.autoScaling">
          <label for="cooldownTimeInput" class="col-md-2 col-form-label">Cooldown time (ms)</label>
          <div class="col-md-10">
            <input class="form-control" type="number" [(ngModel)]="activeWatcher.cooldownTime" id="cooldownTimeInput">
          </div>
        </div>

        <div class="form-group row">
          <label class="col-md-2 col-form-label">Autoscaling</label>
          <div class="col-md-10">
            <ui-switch
                    [(ngModel)]="activeWatcher.autoScaling"
                    [size]="'small'">
            </ui-switch>
          </div>
        </div>
      </panel>

      <panel [header]="getPanelHeader()" [column]="'5'" *ngIf="activeWatcher != undefined">

        <div class="row row-margin-bottom-sm">
          <label class="control-label col-md-3 col-sm-3 col-xs-12" for="componentSelection" style="margin-top:10px;">
              Select group <span class="required">*</span>
          </label>
          <div class="col-md-9 col-sm-9 col-xs-12">
            <select class="form-control" [(ngModel)]="selectedComponent" id="componentSelection" (ngModelChange)="selectCurrentComponent($event)">
              <option  *ngFor="let component of components" [ngValue]="component">{{component}}</option>
            </select>
          </div>
        </div>

        <div class="row row-margin-bottom-sm" *ngIf="!(attributes && attributes.length > 0)">
          <h5>Selected group does not contain attributes - please select another component or set some attributes</h5>
        </div>

        <div class="row row-margin-bottom-sm">
          <label class="control-label col-md-3 col-sm-3 col-xs-12" style="margin-top:10px;">
            Trigger
          </label>
          <div class="col-md-4 col-sm-4 col-xs-12">
            <button class="btn btn-primary"
                    (click)="initTriggerModal()"
                    aria-hidden="true"> Edit trigger
            </button>
          </div>
        </div>

        <div class="row row-margin-bottom-sm">
          <label class="control-label col-md-3 col-sm-3 col-xs-12" style="margin-top:10px;">
            Checkers
          </label>
          <div class="col-md-4 col-sm-4 col-xs-12">
            <button class="btn btn-primary"
                    [disabled]="!(attributes && attributes.length > 0)"
                    (click)="initCheckersModal()"
                    aria-hidden="true"> Edit checkers
            </button>
          </div>
        </div>

        <div class="row row-margin-bottom-sm">
          <label class="control-label col-md-3 col-sm-3 col-xs-12" style="margin-top:10px;">
            Policies
          </label>
          <div class="col-md-4 col-sm-4 col-xs-12">
            <button class="btn btn-primary"
                    (click)="initPoliciesModal()"
                    aria-hidden="true"> Edit policies
            </button>
          </div>
        </div>
      </panel>

    </div>

    <div class="row" style="margin-top: 10px">
      <panel [header]="'Supervisor parameters'" [column]="'12'" *ngIf="activeWatcher != undefined">
        <ptable [entity]="activeWatcher"></ptable>
      </panel>
    </div>

    <div class="row" style="margin-top: 20px; float:right;" *ngIf="activeWatcher != undefined">
      <hr/>
      <div>
        <button class="btn btn-primary" (click)="saveActiveWatcher()">Save</button>
        <button class="btn" (click)="cleanSelection()">Cancel/clean</button>
      </div>
    </div>

    <div class="row" style="margin-top: 10px" *ngIf="activeWatcher == undefined">
      <panel [header]="'List of supervisors'" [column]="'12'">
        <table class="table table-bordered">
          <thead class="thead-inverse">
          <tr>
            <th style="width:90px;">Actions</th>
            <th>Name</th>
            <th>Type</th>
            <th>Autoscaling</th>
            <th>Scaling size</th>
            <th>Cooldown time</th>
            <th>Min/max cluster size</th>
            <th>Checkers</th>
            <th>Trigger</th>
            <th>Scaling policy</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let watcher of watchers" [class.active-tr]="isWatcherActive(watcher)">
            <td>
              <span
                  class="glyphicon glyphicon-remove-circle btn btn-xs btn-danger"
                  (click)="removeWatcher(watcher)"
                  aria-hidden="true">
              </span>
              <span
                  class="glyphicon glyphicon-pencil btn btn-xs btn-primary"
                  (click)="editWatcher(watcher)"
                  aria-hidden="true">
              </span>
            </td>
            <th scope="row">{{watcher.name}}</th>
            <th scope="row">{{watcher.type}}</th>
            <th scope="row">{{watcher.autoScaling}}</th>
            <th scope="row">{{watcher.scalingSize}}</th>
            <th scope="row">{{watcher.cooldownTime}}</th>
            <th scope="row">{{watcher.minClusterSize}}/{{watcher.maxClusterSize}}</th>
            <td>
              <checkers [entity]="watcher.attributeCheckers"></checkers>
            </td>
            <td>
              <trigger [entity]="watcher.trigger"></trigger>
            </td>
            <td>
              <policies [entity]="watcher.scalingPolicies"></policies>
            </td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>
              <button
                      style="float:right;"
                      class="btn btn-primary btn-sm"
                      (click)="addNewWatcher()">+ New supervisor</button>
            </td>
          </tr>
          </tbody>
        </table>

      </panel>
    </div>


  </div>
</div>

