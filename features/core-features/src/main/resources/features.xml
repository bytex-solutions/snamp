<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<features xmlns="http://karaf.apache.org/xmlns/features/v1.4.0" name="snamp-platform">
    <repository>mvn:org.apache.karaf.features/standard/${karaf.version}/xml/features</repository>
    <repository>mvn:org.apache.karaf.features/framework/${karaf.version}/xml/features</repository>

    <feature name="jersey-server" description="Jersey 1.x server-side libraries" version="${jersey.version}">
        <bundle>mvn:javax.ws.rs/jsr311-api/1.1.1</bundle>
        <bundle start="true">mvn:com.sun.jersey/jersey-core/${jersey.version}</bundle>
        <bundle>mvn:com.sun.jersey/jersey-servlet/${jersey.version}</bundle>
        <bundle start="true">mvn:com.sun.jersey/jersey-server/${jersey.version}</bundle>
    </feature>

    <feature name="orientdb-server" description="OrientDB NoSQL Database" version="${orientdb.version}">
        <bundle>mvn:com.orientechnologies/orientdb-core/${orientdb.version}</bundle>
        <bundle>mvn:com.orientechnologies/orientdb-tools/${orientdb.version}</bundle>
        <bundle>mvn:com.orientechnologies/orientdb-client/${orientdb.version}</bundle>
        <bundle>mvn:com.orientechnologies/orientdb-server/${orientdb.version}</bundle>
        <bundle>mvn:com.orientechnologies/orientdb-distributed/${orientdb.version}</bundle>
    </feature>

    <feature name="snamp-core" description="Core SNAMP bundles" version="${project.version}">
        <details>${project.description}</details>
        <!-- Third-party bundles -->
        <bundle>mvn:com.google.code.gson/gson/${gson.version}</bundle>
        <bundle>mvn:com.google.guava/guava/${guava.version}</bundle>
        <bundle>mvn:com.google.code.findbugs/jsr305/${jsr305.version}</bundle>
        <bundle start="true">mvn:com.hazelcast/hazelcast/${hazelcast.version}</bundle>
        <bundle>mvn:com.googlecode.concurrentlinkedhashmap/concurrentlinkedhashmap-lru/1.4.2</bundle>
        <!-- Third-party features -->
        <feature version="[${karaf.version}, ${karaf.maxVersion})">eventadmin</feature>
        <feature version="[${karaf.version}, ${karaf.maxVersion})">war</feature>
        <feature version="[${karaf.version}, ${karaf.maxVersion})">framework</feature>
        <feature version="${jersey.version}">jersey-server</feature>
        <feature version="${orientdb.version}">orientdb-server</feature>
        <!--SNAMP dependencies-->
        <bundle>mvn:com.bytex.snamp/framework/${snamp.version}</bundle>
        <bundle start="true">mvn:com.bytex.snamp/security/${snamp.security.version}</bundle>
        <bundle start="true">mvn:com.bytex.snamp/internal-services/${snamp.services.version}</bundle>
    </feature>

    <feature name="snamp-security" description="SNAMP security layer" version="${project.version}">
        <bundle>mvn:org.bouncycastle/bcpg-jdk15on/${bouncycastle.version}</bundle>
        <bundle>mvn:org.bouncycastle/bcpkix-jdk15on/${bouncycastle.version}</bundle>
        <bundle>mvn:org.bouncycastle/bcprov-jdk15on/${bouncycastle.version}</bundle>
    </feature>

    <feature name="snamp-web-support" description="SNAMP support bundles for Web" version="${project.version}">
        <details>SNAMP support bundles for Web</details>
        <bundle>mvn:io.netty/netty/${netty.version}</bundle>
        <bundle>mvn:org.codehaus.jettison/jettison/${jettison.version}</bundle>
        <bundle>mvn:org.codehaus.jackson/jackson-core-asl/${jackson.version}</bundle>
        <bundle>mvn:org.codehaus.jackson/jackson-mapper-asl/${jackson.version}</bundle>
        <bundle>mvn:org.codehaus.jackson/jackson-jaxrs/${jackson.version}</bundle>
        <bundle>mvn:org.codehaus.jackson/jackson-xc/${jackson.version}</bundle>
        <bundle>mvn:com.sun.jersey/jersey-json/${jersey.version}</bundle>
        <bundle>mvn:com.sun.jersey/jersey-client/${jersey.version}</bundle>
    </feature>

    <feature name="snamp-scripting-support" description="SNAMP support bundles for scripting" version="${project.version}">
        <feature version="${project.version}" >snamp-core</feature>
        <bundle>mvn:org.codehaus.groovy/groovy/${groovy.version}/jar/indy</bundle>
        <bundle>mvn:org.codehaus.groovy/groovy-xml/${groovy.version}/jar/indy</bundle>
        <bundle>mvn:org.codehaus.groovy/groovy-json/${groovy.version}/jar/indy</bundle>
        <bundle>mvn:org.apache.ivy/ivy/${apache.ivy.version}</bundle>
        <bundle>mvn:com.bytex.snamp/scripting/${snamp.scripting.version}</bundle>
        <bundle>mvn:com.bytex.snamp/groovy-xml-bridge/${snamp.scripting.version}</bundle>
    </feature>

    <feature name="snamp-jmx-support" description="Various JMX helpers and JMX-to-JSON serialization" version="${project.version}">
        <bundle>mvn:com.google.code.gson/gson/${gson.version}</bundle>
        <bundle>mvn:com.bytex.snamp/jmx-helpers/${snamp.jmxhelper.version}</bundle>
    </feature>

    <feature name="snamp-ssh-support" description="Set of Java libraries for SSH" version="${project.version}">
        <feature version="${project.version}" >snamp-security</feature>
        <bundle>mvn:net.i2p.crypto/eddsa/${eddsa.version}</bundle>
        <bundle>mvn:com.bytex.snamp/sshj/${sshj.version}</bundle>
    </feature>

    <feature name="snamp-snmp-support" description="Set of Java libraries for SNMPv2/SNMPv3" version="${project.version}">
        <bundle>mvn:com.bytex.snamp/snmp4j/${snmp4j.version}</bundle>
    </feature>

    <feature name="snamp-stream-processing" description="SNAMP instrumentation library and connector for measurements" version="${snamp.stream.processing.version}">
        <feature version="[${snamp.version}, ${snamp.maxVersion})" >snamp-core</feature>
        <feature version="[${snamp.version}, ${snamp.maxVersion})" >snamp-scripting-support</feature>
        <bundle>mvn:com.bytex.snamp/data-stream-processing/${snamp.stream.processing.version}</bundle>
        <bundle>mvn:com.bytex.snamp.instrumentation/core/${snamp.instrumentation.version}</bundle>
    </feature>
</features>
